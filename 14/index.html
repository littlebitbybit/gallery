<!DOCTYPE html>
<html>
<head>
    <title>Stage 1 | The Path Not Taken</title>
    <meta name="description" content="">
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script>
  AFRAME.registerComponent('trigger-click-on', {
  schema: {type: 'string'},

  init: function () {
    var identifier = this.data;
    console.log('initializing click trigger for', identifier, 'with', this.el)
    this.el.addEventListener('click', function (evt) {
      console.log("click on", identifier);
      setTimeout(function() {
        document.querySelector(identifier).click();
      }, 1000)
    });
  }
})


AFRAME.registerComponent('trigger-event-on', {
  schema: {type: 'string'},

  init: function () {
    var identifier = this.data;
    var event_name = this.el.attributes['trigger-event-name'].nodeValue;
    console.log('initializing', event_name, 'trigger for', this.data, 'with', this.el)
    this.el.addEventListener('click', function (evt) {
      console.log("click on", identifier, 'with event', event_name)
      setTimeout(function() {
        document.querySelector(identifier).emit(event_name);
      }, 1000)
    });
  }
})  
  </script>
  
</head>
<body>
<a-scene spawn-rewards physics="gravity: 0">

    <a-assets>
        <a-mixin id="tree" geomtry="scale: 0.75 0.75 0.75"></a-mixin>
        <a-mixin id="foliage" material="color: #74bc5e; emissive: #9c0; emissiveIntensity: 0.25" geometry="segments-radial: 4; segments-height: 1; radius-bottom: 0.6; height: 2" position="0 1.5 0"></a-mixin>
        <a-mixin id="trunk" material="color:#493d30;" geometry="depth:0.2;height: 0.5;width:0.2" position="0 0.25 0"></a-mixin>
        <a-mixin id="stone" material="roughness:0.8;color:#1a3b54" geometry="segments-height:1" receiveShadow="true" castShadow="true"></a-mixin>
    </a-assets>

    <a-sky color="#a3d0ed"></a-sky>

    <!-- Default lighting injected by A-Frame. -->
  

    <a-entity camera look-controls wasd-controls position="0 0.5 2" rotation="0 0 0">
      <a-entity cursor="fuse: true; fuseTimeout: 250"
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: black; shader: flat"
                scale="0.5 0.5 0.5"
                raycaster="far: 20; interval: 1000; objects: .clickable">
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
             fill="backwards" from="1 1 1" to="0.2 0.2 0.2" dur="250"></a-animation>
      </a-entity>
    </a-entity>
  
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="0 1 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.2 1 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-1 2 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1 1.5 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-0.3 1.5 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-1.2 1.2 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-0.8 0.2 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-0.7 0.8 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-0.1 1.9 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="0.5 1.6 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.5 1.95 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.1 1.7 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="0.8 0.6 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="0.8 1 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.5 0.65 0"></a-box>    
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.5 1.4 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-1.4 1.6 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-1 1.5 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-1.6 0.2 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-1.4 0.8 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-2.2 0.9 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="-2.0 1.5 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.5 0.2 0"></a-box>
  <a-box color="yellow" scale="0.08 0.08 0.08" rotation="0 45 45" position="1.9 0.9 0"></a-box>

  
  <a-sphere position="0 -10 0" color="#847452" radius="10"></a-sphere>
  <a-sphere color="#A6ACAF" radius="0.38" position="0 1.05 0"></a-sphere>
  <a-sphere color="#A6ACAF" radius="0.3" position="-0.1 0.5 0"></a-sphere>
  <a-sphere color="black" radius="0.28" position="0 1.02 0.15"></a-sphere>
  <a-cylinder color="#A6ACAF" height="0.3" radius="0.05" position="-0.4 0.65 0" rotation="0 0 110"></a-cylinder>
  <a-cylinder color="#A6ACAF" height="0.3" radius="0.05" position="0.2 0.62 0" rotation="0 0 240"></a-cylinder>
  <a-cylinder color="#A6ACAF" height="0.15" radius="0.05" position="-0.3 0.2 0" rotation="0 0 160"></a-cylinder>
  <a-cylinder color="#A6ACAF" height="0.25" radius="0.05" position="-0.03 0.2 0" rotation="0 0 160"></a-cylinder>
  <a-sphere color="#A6ACAF" radius="0.05" position="-0.59 0.59 0"></a-sphere>
  <a-sphere color="#A6ACAF" radius="0.05" position="0.375 0.52 0"></a-sphere>
  <a-sphere color="#A6ACAF" radius="0.05" position="-0.35 0.077 0"></a-sphere>
  <a-sphere color="#A6ACAF" radius="0.05" position="-0.087 0.04 0"></a-sphere>

  </a-scene>
</body>
</html>